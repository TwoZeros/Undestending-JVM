# Задача "Понимание JVM"

## Цель работы
Описать текстом и/или картинками каждую строку исходного кода программы на языке JAVA с точки зрения происходящего в JVM  


## Код для исследования
```java
public class JvmComprehension {
    public static void main(String[] args) {
        int i = 1;                      // 1
        Object o = new Object();        // 2
        Integer ii = 2;                 // 3
        printAll(o, i, ii);             // 4
        System.out.println("finished"); // 7
    }
    private static void printAll(Object o, int i, Integer ii) {
        Integer uselessVar = 700;                   // 5
        System.out.println(o.toString() + i + ii);  // 6
    }
}
```

## Ход работы

- При запуске программе интерпритатор java встречает определение класса JvmComprehension вызывается class loader и этот класс добавляется в область памяти metaspace.
Попадая в метод main программа создает в Stack фрейм для метода main.
- Строка 1: Переменная "i" типа int размещаяется в stack области видимости метода main
- Строка 2: Создается объект типа Object и размещается в heap (куче), в стеке создается ссылка, которая указывает на этот объект, область видимости main
- Строка 3 Создается объект типа Integer и размещаяется в heap (куче), в стеке создается ссылка, которая указывает на этот объект область видимости main
- Строка 4: Вызывается метод printAll класса JvmComprehension . Это приводит к тому что в stack создается ещё одна область видимости printAll.
В stack добавляются: ссылка на объект Object, int i, ссылка на объект Integer
- Строка 5: Создается объект типа Integer и размещаяется в heap (куче), в стеке создается ссылка, которая указывает на этот объект во фрейме printAll
- Строка 6: Вызывается метод println.  Это приводит к тому что в stack создается ещё один фрейм println, в которую помощещаются: ссылка на String oбъект (само значение размещается в куче), int i, и ссылка на Integer (который был создан на строке 5). После выполнения метода все что лежало в stack во фрейме println очищается, сам фрейм тоже удаляется из stack. Далее заканчивается выполнение printAll указатель стека возвращется в main. Все знанчения во фрейме printAll в stack уже недоступны, они очищаются. ***Если сейчас вызавется сборщик муссора (мы его не контролируем, может и не вызваться в этот момент) то он увидет в куче лежит объект типа Integer со значением 700, на который уже никто не ссылается и он недотупен для использования, поэтому он его удилит из кучи.***
- Строка 7:  Вызывается метод println.  Это приводит к тому что в stack создается ещё однин фрейм println. В куче создется объект типа String со значением "finished" и в стеке во фрейм println помещается ссылка указывающая на созданный объект. Метод выполняется. Содержимое стека фрейма println удаляется. Управление возвращается методу main.
Это последняя строчка метода main, поэтому содержимое stack фрейма main тоже очищается. Программа заканчивает своё выполнение.
